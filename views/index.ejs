<!DOCTYPE html>
<html>
<% include head.ejs %>
<body class="skin-blue">
    <% include header.ejs %>
    <div class="wrapper row-offcanvas row-offcanvas-left">

        <% include leftside.ejs %>

        <!-- Right side column. Contains the navbar and content of the page -->
        <aside class="right-side">                
            <!-- Content Header (Page header) -->
            <section class="content-header">
                <h1>
                    <%= title %>
                    <small><%= heading %></small>
                </h1>
                <ol class="breadcrumb">
                    <li><a href="/"><i class="fa fa-home"></i> Home</a></li>
                    <li class="active"><%= title %></li>
                </ol>
            </section>

            <!-- Main content -->
            <section class="content" ng-app="validationApp">


            <% if(serverMsg != null) {%>
                    <div class="callout callout-primary server_msg">
                        <h4>Server Msg</h4>
                        <p><%= serverMsg %></p>
                    </div>
                    <% } %>


                <% if(logged){ %>

                    <div ng-controller="dataController" class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

                        Welcome, <%= user.local.firstName %> <%= user.local.lastName %>

                            <br><br>

                        <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
                            

                            <div class="box box-primary">
                                <div class="box-header" data-toggle="tooltip" title="" data-original-title="Select Class">
                                    <h3 class="box-title">Your Classes</h3>

                                </div>
                                <div class="box-body">
                                    <ul class="list-unstyled" >
                                        <li ng-repeat="class in classes"><a href="#" ng-click="showDetails(class)">{{ class.classID }}</a></li>
                                    </ul>    
                                </div><!-- /.box-body -->

                            </div>

                            </div>
                            <div class="col-lg-7 col-md-7 col-sm-12 col-xs-12" ng-if="showClass">

                                <div class="box box-primary">
                                    <div class="box-header" data-toggle="tooltip" title="" data-original-title="Select Class">
                                        <h3 class="box-title">Class Details</h3>

                                    </div>
                                    <div class="box-body">
                                           
                                        <dl>
                                            <dt>Class ID:</dt>
                                            <dd>{{ class.classID }}</dd>
                                            <dt>Class Name:</dt>
                                            <dd>{{ class.className }}</dd>
                                            <dt>Start Date:</dt>
                                            <dd>{{ class.starttime }}</dd>
                                            <dt>End Date:</dt>
                                            <dd>{{ class.endtime }}</dd>
                                            <dt>Start Time:</dt>
                                            <dd>{{ class.startingTime }}</dd>
                                            <dt>End Time:</dt>
                                            <dd>{{ class.endingTime }}</dd>
                                            <dt>Package Name:</dt>
                                            <dd>{{ class.packageName }}</dd>
                                            <dt>Class Category:</dt>
                                            <dd>{{ class.classCategory }}</dd>
                                            <dt>School Name:</dt>
                                            <dd>{{ class.schoolName }}</dd>
                                        </dl>

                                    </div><!-- /.box-body -->

                                </div>
                            </div>                    
                    </div>
                <% } %>

                <% if(!logged){ %>

                <div class="pull-right col-lg-4 col-md-4 col-sm-4 col-xs-12">

                    

                    <div class="box box-primary" ng-controller="mainController">
                        <div class="box-header">
                            <h3 class="box-title">Login</h3>
                        </div><!-- /.box-header -->
                        <!-- form start -->
                        <form role="form" method="post" action="/login" novalidate name="userForm" ng-submit="submitForm(userForm.$valid)">
                            <div class="box-body">
                                <div class="form-group">
                                    <label for="exampleInputEmail1">Email address</label>
                                    <input ng-model="email" required type="email" name="email" class="form-control" id="exampleInputEmail1" placeholder="Enter email">
                                    
                                    <span style="color:red" ng-show="userForm.email.$dirty && userForm.email.$invalid">
                                      <span ng-show="userForm.email.$error.required">Email is required.</span>
                                      <span ng-show="userForm.email.$error.email">Invalid email format.</span>
                                  </span>

                              </div>
                              <div class="form-group">
                                <label for="exampleInputPassword1">Password</label>
                                <input ng-model="password" required type="password" name="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
                                <span style="color:red" ng-show="userForm.password.$dirty && userForm.password.$invalid">
                                    <span ng-show="userForm.password.$error.required">Password is required.</span>
                                </span>
                            </div>

                            <div class="form-group">

                                <div class="pull-left">
                                    <label>
                                        <input name="remember" type="checkbox" style="position: absolute; opacity: 0;"> Remember
                                    </label>
                                </div>
                                <div class="pull-right">
                                    <button type="submit" ng-disabled="userForm.$invalid" class="btn btn-primary">Login</button>
                                </div>
                            </div>
                            <div class="form-group">

                            </div>
                            <span class="clearfix"></span>
                        </div><!-- /.box-body -->


                    </form>
                    <div class="box-footer">
                        To Register Click <a href="/register">Here</a>
                    </div>
                </div>
            </div>

            <% } %>

        </section><!-- /.content -->
    </aside><!-- /.right-side -->
</div><!-- ./wrapper -->

<% if(logged){ %>
<script>
//set user id
var user_id = "<%= user._id %>";
</script>
<% } %>
<script src="/angular/angular.min.js"></script>
<script src="/angular_app/mainpage/app.js"></script>

</body>
</html>
